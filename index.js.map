{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function getImages(query, page) {\n  const baseURL = 'https://pixabay.com';\n  const endPoint = '/api/';\n  const url = baseURL + endPoint;\n\n  const params = {\n    q: query,\n    key: '46359469-7b013fe590d21d7ac02b102d9',\n    image_type: 'photo',\n    orientation: 'horizontal',\n    page: page,\n    per_page: 15,\n    safesearch: 'true',\n  };\n\n  const res = await axios.get(url, { params });\n  return res.data;\n}\n","export function renderImages(dataImages, container) {\n  const imagesMarkup = dataImages\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<li class=\"gallery-item\">\n          <a href=\"${largeImageURL}\" class=\"gallery-link\">\n            <img class=\"gallery-img\" src=\"${webformatURL}\" alt=\"${tags}\" />\n          </a>\n          <ul class=\"img-stats\">\n            <li class=\"stat-item\">\n              <span class=\"stat-label\">Likes</span>\n              <span class=\"stat-value\" data-likes>${likes}</span>\n            </li>\n            <li class=\"stat-item\">\n              <span class=\"stat-label\">Views</span>\n              <span class=\"stat-value\" data-views>${views}</span>\n            </li>\n            <li class=\"stat-item\">\n              <span class=\"stat-label\">Comments</span>\n              <span class=\"stat-value\" data-comments>${comments}</span>\n            </li>\n            <li class=\"stat-item\">\n              <span class=\"stat-label\">Downloads</span>\n              <span class=\"stat-value\" data-downloads>${downloads}</span>\n            </li>\n          </ul>\n        </li>`;\n      }\n    )\n    .join('');\n\n  container.insertAdjacentHTML('beforeend', imagesMarkup);\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { getImages } from './js/pixabay-api';\nimport { renderImages } from './js/render-functions';\n\nconst refs = {\n  searchForm: document.querySelector('.search-form'),\n  gallery: document.querySelector('.gallery'),\n  loader: document.querySelector('.loader'),\n  loadMoreBtn: document.querySelector('.load-more-btn'),\n};\n\nlet page = 1;\nlet query;\nlet totalHits;\n\nconst viewImage = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionsData: 'alt',\n  captionsDelay: 250,\n});\n\nrefs.searchForm.addEventListener('submit', onSearchFormSubmit);\nrefs.loadMoreBtn.addEventListener('click', onLoadMoreClick);\n\nasync function onSearchFormSubmit(event) {\n  event.preventDefault();\n\n  query = event.currentTarget.elements.query.value.trim();\n  page = 1;\n\n  refs.gallery.innerHTML = '';\n  refs.loader.classList.remove('visually-hidden');\n\n  try {\n    const data = await getImages(query);\n\n    const dataImages = data.hits;\n    if (dataImages.length === 0) {\n      iziToast.info({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        maxWidth: 350,\n        color: '#a3b6fd',\n        closeOnEscape: true,\n        closeOnClick: true,\n        position: 'topRight',\n      });\n    } else {\n      totalHits = data.totalHits;\n      renderImages(dataImages, refs.gallery);\n      viewImage.refresh();\n\n      if (totalHits > page * 15) {\n        refs.loadMoreBtn.classList.remove('visually-hidden');\n      }\n    }\n  } catch (error) {\n    iziToast.error({\n      message: 'Something went wrong. Please try again later.',\n      maxWidth: 350,\n      closeOnEscape: true,\n      closeOnClick: true,\n      position: 'topRight',\n    });\n  } finally {\n    refs.loader.classList.add('visually-hidden');\n    refs.searchForm.reset();\n  }\n}\n\nasync function onLoadMoreClick() {\n  page += 1;\n  refs.loader.classList.remove('visually-hidden');\n\n  try {\n    const data = await getImages(query, page);\n\n    renderImages(data.hits, refs.gallery, true);\n    viewImage.refresh();\n\n    scrollCollection();\n\n    if (totalHits <= page * 15) {\n      refs.loadMoreBtn.classList.add('visually-hidden');\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        maxWidth: 350,\n        color: '#a3b6fd',\n        closeOnEscape: true,\n        closeOnClick: true,\n        position: 'topRight',\n      });\n    }\n  } catch (error) {\n    iziToast.error({\n      message: 'Something went wrong. Please try again later.',\n      maxWidth: 350,\n      closeOnEscape: true,\n      closeOnClick: true,\n      position: 'topRight',\n    });\n  } finally {\n    refs.loader.classList.add('visually-hidden');\n  }\n}\n\nfunction scrollCollection() {\n  const lastElementChild = refs.gallery.lastElementChild;\n  const imageHeight = lastElementChild.getBoundingClientRect().height;\n  window.scrollBy({\n    top: imageHeight * 2,\n    left: 0,\n    behavior: 'smooth',\n  });\n}\n"],"names":["getImages","query","page","url","params","axios","renderImages","dataImages","container","imagesMarkup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","refs","totalHits","viewImage","SimpleLightbox","onSearchFormSubmit","onLoadMoreClick","event","data","iziToast","scrollCollection","imageHeight"],"mappings":"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"}